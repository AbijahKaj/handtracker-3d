<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0d1117" />
    <meta name="color-scheme" content="dark light" />
    <title>Hand Tracking 3D Demo — Abijah Kajabika</title>
    <meta
      name="description"
      content="Interactive 3D hand tracking demonstration using MediaPipe and Three.js. Control 3D objects with hand gestures in real-time through your webcam. Built by Abijah Kajabika."
    />
    <meta name="author" content="Abijah Kajabika" />
    <meta name="robots" content="noindex, nofollow" />
    <link rel="canonical" href="https://abijah.me/handtracker.html" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Hand Tracking 3D Demo — Abijah Kajabika" />
    <meta
      property="og:description"
      content="Interactive 3D hand tracking demonstration using MediaPipe and Three.js. Control 3D objects with hand gestures in real-time through your webcam."
    />
    <meta property="og:url" content="https://abijah.me/handtracker.html" />
    <meta property="og:site_name" content="Abijah Kajabika" />
    <meta property="og:locale" content="en_US" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@abijahkaj" />
    <meta name="twitter:creator" content="@abijahkaj" />
    <meta name="twitter:title" content="Hand Tracking 3D Demo — Abijah Kajabika" />
    <meta
      name="twitter:description"
      content="Interactive 3D hand tracking demonstration using MediaPipe and Three.js. Control 3D objects with hand gestures in real-time."
    />

    <!-- Additional SEO meta tags -->
    <meta
      name="keywords"
      content="hand tracking, 3D demo, computer vision, MediaPipe, WebGL, Three.js, interactive demo, Abijah Kajabika"
    />
    <meta name="application-name" content="Hand Tracking 3D Demo" />
    <meta name="apple-mobile-web-app-title" content="Hand Tracking 3D" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />

    <!-- Preconnect for performance -->

    <!-- Structured data (JSON-LD) -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Hand Tracking 3D Demo",
        "description": "Interactive 3D hand tracking demonstration using MediaPipe and Three.js. Control 3D objects with hand gestures in real-time.",
        "url": "https://abijah.me/handtracker.html",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "Web Browser",
        "author": {
          "@type": "Person",
          "name": "Abijah Kajabika",
          "url": "https://abijah.me/"
        },
        "creator": {
          "@type": "Person",
          "name": "Abijah Kajabika",
          "url": "https://abijah.me/"
        },
        "inLanguage": "en-US",
        "isAccessibleForFree": true,
        "browserRequirements": "Requires JavaScript. Requires HTML5. Requires WebGL."
      }
    </script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: #0d1117;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      }
      #videoContainer {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 320px;
        height: 240px;
        border: 2px solid #f59e0b;
        border-radius: 8px;
        overflow: hidden;
        z-index: 10;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
      }
      video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transform: scaleX(-1);
      }
      /* Maintain aspect ratio on mobile */
      @media (max-width: 768px) {
        video {
          object-fit: contain;
          background: #0d1117;
          width: 100%;
          height: 100%;
        }
        #canvas {
          /* Canvas will be sized by JavaScript to match video */
          /* Ensure it maintains aspect ratio */
          width: 100%;
          height: 100%;
        }
      }
      #canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        transform: scaleX(-1);
        pointer-events: none;
      }
      /* On mobile, maintain aspect ratio for canvas overlay */
      @media (max-width: 768px) {
        #canvas {
          object-fit: contain;
          max-width: 100%;
          max-height: 100%;
        }
      }
      #threeCanvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: block;
      }
      #statusContainer {
        position: absolute;
        top: 20px;
        left: 20px;
        display: flex;
        align-items: center;
        gap: 12px;
        z-index: 10;
      }
      #status {
        color: #e6edf3;
        background: rgba(13, 17, 23, 0.8);
        padding: 12px 20px;
        border-radius: 8px;
        font-size: 14px;
        border: 1px solid rgba(245, 158, 11, 0.3);
      }
      #status.loading {
        color: #f59e0b;
      }
      #status.error {
        color: #ff4444;
      }
      #stopButton {
        background: #dc2626;
        color: #ffffff;
        border: none;
        padding: 12px 20px;
        font-size: 14px;
        font-weight: 600;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
      }
      #stopButton:hover {
        background: #ef4444;
        box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
        transform: translateY(-1px);
      }
      #stopButton:active {
        transform: translateY(0);
      }
      #stopButton.hidden {
        display: none;
      }
      #startButton {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #f59e0b;
        color: #0d1117;
        border: none;
        padding: 16px 32px;
        font-size: 18px;
        font-weight: 600;
        border-radius: 8px;
        cursor: pointer;
        z-index: 20;
        transition: all 0.2s;
        box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
      }
      #startButton:hover {
        background: #fbbf24;
        transform: translate(-50%, -50%) scale(1.05);
        box-shadow: 0 6px 16px rgba(245, 158, 11, 0.4);
      }
      #startButton:active {
        transform: translate(-50%, -50%) scale(0.98);
      }
      #startButton.hidden {
        display: none;
      }
      #videoContainer {
        opacity: 0;
        transition: opacity 0.3s;
      }
      #videoContainer.visible {
        opacity: 1;
      }
      #backButton {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(13, 17, 23, 0.8);
        color: #e6edf3;
        border: 1px solid rgba(245, 158, 11, 0.3);
        border-radius: 8px;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 20;
        transition: all 0.2s;
      }
      #backButton:hover {
        background: rgba(13, 17, 23, 0.95);
        border-color: rgba(245, 158, 11, 0.5);
        transform: translateY(-1px);
      }
      #backButton svg {
        width: 24px;
        height: 24px;
      }
      #statusContainer {
        left: 70px;
      }
      #recordButton {
        position: absolute;
        bottom: 20px;
        left: 20px;
        background: #f59e0b;
        color: #0d1117;
        border: none;
        padding: 12px 20px;
        font-size: 14px;
        font-weight: 600;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
        z-index: 10;
      }
      #recordButton:hover {
        background: #fbbf24;
        box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
        transform: translateY(-1px);
      }
      #recordButton:active {
        transform: translateY(0);
      }
      #recordButton.hidden {
        display: none;
      }
      #recordButton.recording {
        background: #dc2626;
        color: #ffffff;
        animation: pulse 2s infinite;
        box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
      }
      #recordButton.recording:hover {
        background: #ef4444;
        box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
      }
      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }
      #status.recording {
        color: #dc2626;
      }

      /* Mobile responsive styles - split screen layout */
      @media (max-width: 768px) {
        /* Split screen: 3D scene on top, video on bottom */
        #threeCanvas {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 50vh; /* Top half for 3D scene */
        }

        #videoContainer {
          position: absolute;
          top: 50vh; /* Start at middle of screen */
          left: 0;
          right: 0;
          width: 100%;
          height: 50vh; /* Bottom half for video */
          border: none;
          border-top: 2px solid #f59e0b;
          border-radius: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #0d1117;
          overflow: hidden; /* Ensure content doesn't overflow */
        }

        /* Adjust status and buttons for mobile */
        #statusContainer {
          top: 10px;
          left: 10px;
          right: 10px;
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }

        #status {
          font-size: 12px;
          padding: 8px 16px;
          width: 100%;
        }

        #stopButton {
          padding: 8px 16px;
          font-size: 12px;
        }

        #startButton {
          font-size: 16px;
          padding: 14px 28px;
        }

        #recordButton {
          position: fixed; /* Use fixed positioning on mobile */
          bottom: 10px;
          left: 10px;
          right: 10px;
          width: calc(100% - 20px);
          padding: 12px 20px;
          font-size: 14px;
          z-index: 20; /* Above video container and other elements */
        }
        #recordButton.hidden {
          display: none; /* Still respect hidden class */
        }

        #backButton {
          top: 10px;
          left: 10px;
          width: 36px;
          height: 36px;
        }

        #backButton svg {
          width: 20px;
          height: 20px;
        }

        /* Adjust status container when back button is present */
        #statusContainer {
          left: 56px; /* 36px button + 10px margin + 10px gap */
        }
      }

      /* Very small screens */
      @media (max-width: 480px) {
        #status {
          font-size: 11px;
          padding: 6px 12px;
        }

        #stopButton {
          padding: 6px 12px;
          font-size: 11px;
        }

        #startButton {
          font-size: 14px;
          padding: 12px 24px;
        }

        #recordButton {
          font-size: 12px;
          padding: 10px 16px;
        }
      }

      /* Landscape orientation on mobile - keep split screen but adjust proportions */
      @media (max-width: 768px) and (orientation: landscape) {
        #threeCanvas {
          height: 55vh; /* Slightly more for 3D scene in landscape */
        }

        #videoContainer {
          top: 55vh;
          height: 45vh; /* Slightly less for video in landscape */
        }
      }
    </style>
  </head>
  <body>
    <a href="/" id="backButton" title="Back to home">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
      </svg>
    </a>
    <button id="startButton">Start Hand Tracking</button>
    <div id="statusContainer">
      <div id="status">Click "Start Hand Tracking" to begin</div>
      <button id="stopButton" class="hidden">Stop</button>
    </div>
    <button id="recordButton" class="hidden">Start Recording</button>
    <div id="videoContainer">
      <video id="video" autoplay playsinline muted></video>
      <canvas id="canvas"></canvas>
    </div>
    <canvas id="threeCanvas"></canvas>
    <script type="module" src="/src/handtracker.ts"></script>
  </body>
</html>
